interface IRating {
  rating: number;
}

export const RecipeRating = ({ rating }: IRating) => {
  const totalStars = 5;
  const fullStars = Math.floor(rating);
  const decimalPart = +(rating - fullStars).toFixed(2);
  const getStarType = (index: number) => {
    if (index < fullStars) return 'full';
    if (index === fullStars && decimalPart > 0) return 'partial';
    return 'empty';
  };

  return (
    <div className="flex gap-x-0.5">
      {[...Array(totalStars)].map((_, index) => {
        const starType = getStarType(index);
        const partialWidth = Math.round(decimalPart * 100);

        return (
          <div key={index} className="relative size-5">
            <svg
              width="20"
              height="20"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className="absolute left-0 top-0"
            >
              <path
                d="
                  M7.24123 10.4307L9.99942 12.1782C10.352 12.4015 10.7897 12.0693 10.6851 11.6578L9.8882 
                  8.52295C9.86576 8.43564 9.86842 8.34377 9.89587 8.2579C9.92332 8.17203 9.97445 8.09565 
                  10.0434 8.03755L12.5167 5.97893C12.8417 5.70843 12.674 5.16907 12.2565 5.14197L9.0264 
                  4.93234C8.9394 4.92613 8.85595 4.89532 8.78578 4.84352C8.7156 4.79171 8.66159 4.72104 
                  8.63003 4.63973L7.42535 1.60605C7.39261 1.51975 7.33438 1.44544 7.25841 1.39301C7.18244
                  1.34058 7.09231 1.3125 7 1.3125C6.90769 1.3125 6.81757 1.34058 6.7416 1.39301C6.66562 
                  1.44544 6.6074 1.51975 6.57465 1.60605L5.36998 4.63973C5.33841 4.72104 5.2844 4.79171 
                  5.21423 4.84352C5.14405 4.89532 5.06061 4.92613 4.97361 4.93234L1.74355 5.14197C1.32601 
                  5.16907 1.15826 5.70843 1.48326 5.97893L3.95662 8.03755C4.02555 8.09565 4.07668 8.17203 
                  4.10413 8.2579C4.13158 8.34377 4.13424 8.43564 4.1118 8.52295L3.37277 11.4301C3.24722 
                  11.924 3.77251 12.3227 4.19558 12.0546L6.75877 10.4307C6.83086 10.3848 6.91455 10.3604
                  7 10.3604C7.08546 10.3604 7.16914 10.3848 7.24123 10.4307Z
                "
                fill="#7b7b7b"
              />
            </svg>

            {starType !== 'empty' && (
              <div
                className="absolute left-0 top-0 h-full overflow-hidden"
                style={{ width: starType === 'partial' ? `${partialWidth}%` : '100%' }}
              >
                <svg width="20" height="20" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="
                      M7.24123 10.4307L9.99942 12.1782C10.352 12.4015 10.7897 12.0693 10.6851 11.6578L9.8882
                      8.52295C9.86576 8.43564 9.86842 8.34377 9.89587 8.2579C9.92332 8.17203 9.97445 8.09565 
                      10.0434 8.03755L12.5167 5.97893C12.8417 5.70843 12.674 5.16907 12.2565 5.14197L9.0264 
                      4.93234C8.9394 4.92613 8.85595 4.89532 8.78578 4.84352C8.7156 4.79171 8.66159 4.72104 
                      8.63003 4.63973L7.42535 1.60605C7.39261 1.51975 7.33438 1.44544 7.25841 1.39301C7.18244 
                      1.34058 7.09231 1.3125 7 1.3125C6.90769 1.3125 6.81757 1.34058 6.7416 1.39301C6.66562 
                      1.44544 6.6074 1.51975 6.57465 1.60605L5.36998 4.63973C5.33841 4.72104 5.2844 4.79171 
                      5.21423 4.84352C5.14405 4.89532 5.06061 4.92613 4.97361 4.93234L1.74355 5.14197C1.32601 
                      5.16907 1.15826 5.70843 1.48326 5.97893L3.95662 8.03755C4.02555 8.09565 4.07668 8.17203 
                      4.10413 8.2579C4.13158 8.34377 4.13424 8.43564 4.1118 8.52295L3.37277 11.4301C3.24722 
                      11.924 3.77251 12.3227 4.19558 12.0546L6.75877 10.4307C6.83086 10.3848 6.91455 10.3604 
                      7 10.3604C7.08546 10.3604 7.16914 10.3848 7.24123 10.4307Z
                    "
                    fill="#ff642f"
                  />
                </svg>
              </div>
            )}
          </div>
        );
      })}
    </div>
  );
};
